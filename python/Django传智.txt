传智播客Django就业班教程笔记

MVC框架的核心思想是:解耦 

优秀程序的特点:
	低耦合,高内聚 也就是模块之间不要有太多的依赖
	高可扩展性 
	向后兼容

Django使用的是MVT思想 T表示template,负责呈现内容到浏览器

解压 .tar.xz 文件 
	tar -Jxvf  Python-3.6.2.tar.xz

window下搭建Django开发环境
	下载 Django 压缩包，解压并和Python安装目录放在同一个根目录，进入 Django 目录，执行python setup.py install，然后开始安装，Django将要被安装到Python的Lib下site-packages

	HelloWorld: 项目的容器。

	manage.py: 一个实用的命令行工具，可让你以各种方式与该 Django 项目进行交互。
	HelloWorld/__init__.py: 一个空文件，告诉 Python 该目录是一个 Python 包。
	HelloWorld/settings.py: 该 Django 项目的设置/配置。
	HelloWorld/urls.py: 该 Django 项目的 URL 声明; 一份由 Django 驱动的网站"目录"。
	HelloWorld/wsgi.py: 一个 WSGI 兼容的 Web 服务器的入口，以便运行你的项目。

---------------------------------------

from django.db import models

# 模型 一个类对应一个表 类的属性对应一个字段
# 定义这些类的目的是: 通过模型类去定义对象,然后映射成sql语句
# 一定要写 models里面定义好的类型

# Create your models here.
class BookInfo(models.Model):
    btitle = models.CharField(max_length=20)
    bpub_date = models.DateTimeField()

    def __str__(self):
        return self.btitle

class HeroInfo(models.Model):
    hname = models.CharField(max_length=10)
    hgender = models.BooleanField()
    hcontent = models.CharField(max_length=1000)

    # 表示这个属性属于 BookInfo这个类的对象,并且是这个表的主键
    hbook = models.ForeignKey(BookInfo,on_delete="")


在 shell 中测试
	In [1]: from booktest.models import *

	In [2]: from datetime import datetime

	In [3]: b = BookInfo()

	In [4]: b.btitle="水浒传"

	In [5]: b.bpub_date = datetime(year=1989,month=12,day=11)

	In [6]: b.save()

	In [2]: BookInfo.objects.all()

	In [6]: BookInfo.objects.get(pk=3)
	Out[6]: <BookInfo: 天龙八部>

注意:当修改了models文件后,需要重新进入 Python shell 重新引入后才能生效

删除操作:
	In [14]: b=BookInfo.objects.get(pk=2)

	In [15]: b.delete()

	In [16]: BookInfo.objects.all()
	Out[16]: [<BookInfo: 天龙八部>]


修改操作:
	In [23]: b=BookInfo.objects.get(pk=1)

	In [24]: b
	Out[24]: <BookInfo: 天龙八部>

	In [25]: b.btitle="水浒传"

	In [26]: b.save()

	In [27]: BookInfo.objects.all()
	Out[27]: [<BookInfo: 水浒传>]

用户管理: 这一步必须要在生成表的 迁移 后才能进行!!!
	python manager.py createsuperuser 

注意:学习过程中一定要使用对应的版本:
向admin注册booktest的模型

	打开booktest/admin.py文件，注册模型
	from django.contrib import admin
	from booktest.models import BookInfo
	admin.site.register(BookInfo)



























学习进度: 